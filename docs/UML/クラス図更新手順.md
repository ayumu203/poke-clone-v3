# クラス図更新手順

## 概要

`EndResult`、`EvolutionInfo`、`EndReason`の実装に伴い、クラス図を更新する必要があります。

## 更新内容

### 1. 新しいクラスの追加

#### EndResult クラス

**プロパティ:**
- `WinnerId: string` - 勝者のプレイヤーID
- `LoserId: string` - 敗者のプレイヤーID
- `Reason: EndReason` - 対戦終了の理由
- `ExperienceGained: int` - 獲得した経験値
- `Evolutions: List<EvolutionInfo>` - 進化したポケモンの情報

#### EvolutionInfo クラス

**プロパティ:**
- `PokemonId: string` - 進化したポケモンのID
- `FromSpeciesId: int` - 進化前のポケモン種族ID
- `ToSpeciesId: int` - 進化後のポケモン種族ID

### 2. 新しい列挙型の追加

#### EndReason 列挙型

**値:**
- `AllPokemonFainted` - すべてのポケモンが倒れた
- `Caught` - ポケモンを捕獲した
- `Escaped` - 逃走した

### 3. 既存クラスの更新

#### ProcessResult クラス

**追加プロパティ:**
- `EndResult?: EndResult` - 対戦終了時の詳細情報（nullable）

### 4. リレーションシップの追加

1. **ProcessResult → EndResult**
   - タイプ: コンポジション（Composition）
   - 多重度: 0..1（ProcessResultは0個または1個のEndResultを持つ）
   - 意味: ProcessResultがEndResultを所有する

2. **EndResult → EvolutionInfo**
   - タイプ: コンポジション（Composition）
   - 多重度: 0..*（EndResultは0個以上のEvolutionInfoを持つ）
   - 意味: EndResultがEvolutionInfoのリストを所有する

3. **EndResult → EndReason**
   - タイプ: 関連（Association）
   - 多重度: 1（EndResultは1つのEndReasonを持つ）
   - 意味: EndResultがEndReason列挙型の値を参照する

## 更新手順

1. `Docs/UML/クラス図.drawio`をdraw.ioで開く

2. **Domainレイヤー**（オレンジ色の枠内）に以下を追加:

   a. **EndResultクラス**を追加
      - 位置: ProcessResultの近く
      - プロパティを上記の通り追加
   
   b. **EvolutionInfoクラス**を追加
      - 位置: EndResultの近く
      - プロパティを上記の通り追加

3. **列挙型ページ**（2ページ目）に以下を追加:

   a. **EndReason列挙型**を追加
      - 位置: 他の列挙型の近く
      - 値を上記の通り追加

4. **ProcessResultクラス**を更新:
   - `EndResult?: EndResult`プロパティを追加

5. **リレーションシップを追加**:
   - ProcessResult → EndResult（コンポジション、ダイヤモンド付き線）
   - EndResult → EvolutionInfo（コンポジション、ダイヤモンド付き線）
   - EndResult → EndReason（関連、矢印付き線）

6. ファイルを保存

## 確認事項

- [ ] EndResultクラスが追加されている
- [ ] EvolutionInfoクラスが追加されている
- [ ] EndReason列挙型が追加されている
- [ ] ProcessResultにEndResultプロパティが追加されている
- [ ] すべてのリレーションシップが正しく描画されている
- [ ] 多重度が正しく設定されている
