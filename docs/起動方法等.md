# 起動方法

## データベース・バックエンド

### マイグレーション

```bash
# SQL Server コンテナの起動(初回)
docker run -e "ACCEPT_EULA=Y" -e "MSSQL_SA_PASSWORD=Your_Password123!" -p 1433:1433 --name sql_server_dev -d mcr.microsoft.com/mssql/server:2022-latest
# SQL Server コンテナの起動(2回目以降)
docker start sql_server_dev
# データベースのマイグレーション
dotnet ef migrations add InitialCreate
# データベースの更新
dotnet ef database update
# SQL Server コンテナの停止
docker remove sql_server_dev
```

### マイグレーションがうまくいかないとき
```bash
# データベースの削除
dotnet ef database drop
# マイグレーションのディレクトリを手動で削除
dotnet ef migrations add InitialCreateWithManualPk
# データベースの更新
dotnet ef database update
```

```bash
# バッチ処理実行
http://localhost:5259/api/seeding/extract-all
http://localhost:5259/api/seeding/load-all
```

## バッチ処理

```http
POST http://localhost:5259/api/seeding/extract-all  # PokeAPIからデータ抽出・ファイル保存
POST http://localhost:5259/api/seeding/load-all     # ファイルからデータベースへデータロード
```

## エンドポイント

### データ管理・取得系

#### ポケモン種族データ

```http
GET http://localhost:5259/api/pokemonspecies        # 全ポケモン種族データ取得
GET http://localhost:5259/api/pokemonspecies/{id}   # 特定のポケモン種族データ取得
```

#### ポケモン個体データ

```http
GET http://localhost:5259/api/pokemons              # 全ポケモン個体データ取得
GET http://localhost:5259/api/pokemons/{id}         # 特定のポケモン個体データ取得
```

#### 技データ

```http
GET http://localhost:5259/api/move                  # 全技データ取得
GET http://localhost:5259/api/move/{id}             # 特定の技データ取得
```

#### ポケモン-技関連データ

```http
GET http://localhost:5259/api/pokemonmove/species/{speciesId}  # 特定種族が覚える技一覧
```

### プレイヤー・パーティ管理系

#### プレイヤーデータ

```http
GET http://localhost:5259/api/player                # 全プレイヤーデータ取得
GET http://localhost:5259/api/player/{id}           # 特定のプレイヤーデータ取得
```

#### パーティデータ

```http
GET http://localhost:5259/api/playerparty/{playerId}  # 特定プレイヤーのパーティデータ取得
```

### バトル系

#### CPU戦

```http
POST http://localhost:5259/api/battle/cpu           # CPU戦バトルルーム作成（要認証）
```
